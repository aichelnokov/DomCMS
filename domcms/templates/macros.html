{% macro nested_list(list,domcms,users) %}
	<ul class="list-group nested_list{% if domcms.sortable==1 %} sortable{% endif %}">
		{% for i in domcms.data.list %}
		<li class="list-group-item">
			<div class="nested_li">
				{% if i.title is defined %}<a href="{% if users.access[domcms.mode]['id']['access_write']!=0 %}{{ domcms.url.edit|replace({'%ID%':i.id}) }}{% else %}#{% endif %}">{{ i.title }}</a>{% endif %}
				{% if i.url is defined %}<span class="label label-default">{{ i.url }}</span>{% endif %}
				<div class="btn-toolbar">
					{% if domcms.model[domcms.name~'_photos'] is defined %}
					<div class="btn-group">
						<a href="{{ domcms.url.photos|replace({'%ID_PARENT%':i.id}) }}" class="btn btn-default"><span class="glyphicon glyphicon-picture"></span></a>
					</div>
					{% endif %}
					{% if i.visible is defined %}
					<div class="btn-group">
						<div href="#" class="btn btn-default active"><span class="glyphicon glyphicon-eye-open"></span></div>
						<div href="#" class="btn btn-default"><span class="glyphicon glyphicon-eye-close"></span></div>
					</div>
					{% endif %}
					<div class="btn-group">
						<a href="{{ domcms.url.edit|replace({'%ID%':i.id}) }}" class="btn btn-default{% if users.access[domcms.mode]['id']['access_write']==0 %} disabled{% endif %}"><span class="glyphicon glyphicon-pencil"></span></a>
						<a href="{{ domcms.url.delete|replace({'%ID%':i.id}) }}" class="btn btn-default{% if users.access[domcms.mode]['id']['access_delete']==0 %} disabled{% endif %}"><span class="glyphicon glyphicon-trash"></span></a>
					</div>
				</div>
			</div>
			{% if i.children|length>0 %}{{ _self.nested_list(i.children,domcms,users) }}{% endif %}
		</li>
		{% endfor %}
	</ul>
{% endmacro %}